# GitHub Copilot Instructions for Dream Analyzer Project

## üéØ Project Context
You are working on **Dream Analyzer** - a cross-platform application (web + Android) that analyzes dreams using local AI and provides symbolic interpretations.

## üèóÔ∏è Architecture Guidelines
**ALWAYS follow the architecture defined in ARCHITECTURE.md:**
- **Monorepo structure** with shared components
- **TypeScript-first** development
- **React** (web) + **React Native** (mobile)
- **Node.js + Fastify** backend
- **SQLite + Prisma** for data
- **Ollama + Transformers.js** for AI (hybrid approach)
- **Tamagui** for universal UI components

## üìã Development Priorities
**Follow the implementation phases from IMPLEMENTATION_PLAN.md:**
1. Core backend API and database
2. Web application with AI integration  
3. Mobile React Native app
4. Advanced features and optimization

## üõ†Ô∏è Code Standards & Practices

### TypeScript Standards
- Use **strict mode** always
- Define proper interfaces for all data structures
- Prefer `type` over `interface` for unions and computed types
- Use generics for reusable components and functions

### React/React Native Standards  
- Use **functional components** with hooks
- Implement **proper error boundaries**
- Use **React.memo** for performance optimization
- Follow **accessibility** best practices (a11y)

### Backend Standards
- Use **Fastify** over Express for better performance
- Implement **proper error handling** middleware
- Use **Zod** for request/response validation
- Follow **RESTful API** design principles

### AI Integration Guidelines
- **Privacy-first**: Always prefer local processing
- Implement **fallback strategies** (Ollama ‚Üí Transformers.js)
- Use **proper prompt engineering** for dream analysis
- Cache AI responses for better performance

### Database Guidelines
- Use **Prisma** for type-safe database operations
- Design schemas with **proper relationships**
- Implement **data migration** strategies
- Consider **indexing** for search functionality

## üîí Security & Privacy Requirements
- **No external AI APIs** that send personal data
- **Local data storage** only (SQLite)
- **Encrypt sensitive dream content**
- Follow **GDPR principles** (data portability, deletion)

## üì± Cross-Platform Considerations
- **Shared business logic** between web and mobile
- **Platform-specific implementations** for native features
- **Consistent UI/UX** across platforms using Tamagui
- **Performance optimization** for mobile devices

## üé® UI/UX Guidelines
- **Dark mode support** (dreams often recorded at night)
- **Accessibility** compliance (WCAG 2.1 AA)
- **Intuitive voice input** workflow
- **Fast dream entry** experience (< 3 taps to start)
- **Beautiful dream journal** with search and filtering

## üöÄ Performance Requirements
- **< 2 second** AI analysis response time
- **Offline functionality** for core features  
- **Progressive loading** for large dream histories
- **Optimized bundle sizes** for web and mobile

## üß™ Testing Strategy
- **Unit tests** for business logic (Vitest)
- **Integration tests** for API endpoints
- **E2E tests** for critical user flows
- **Cross-platform compatibility** testing

## üì¶ Dependency Management
- Use **pnpm** for faster installs and disk efficiency
- **Pin exact versions** for AI/ML dependencies
- **Regular security audits** with npm audit
- **Bundle analysis** to keep sizes optimal

## üîÑ Development Workflow
- **Feature branches** for new functionality
- **Conventional commits** for clear history
- **Code reviews** for quality assurance
- **Continuous integration** with automated testing

## ‚ö° Quick References

### File Structure Patterns
```
‚îú‚îÄ‚îÄ apps/
‚îÇ   ‚îú‚îÄ‚îÄ web/src/components/     # React components
‚îÇ   ‚îú‚îÄ‚îÄ mobile/src/screens/     # React Native screens  
‚îÇ   ‚îî‚îÄ‚îÄ api/src/routes/         # API endpoints
‚îú‚îÄ‚îÄ libs/
‚îÇ   ‚îú‚îÄ‚îÄ shared/src/types/       # TypeScript definitions
‚îÇ   ‚îú‚îÄ‚îÄ ui/src/components/      # Universal UI components
‚îÇ   ‚îî‚îÄ‚îÄ ai/src/services/        # AI processing logic
```

### Import Patterns
```typescript
// Shared types
import type { Dream, Analysis } from '@dreamer/shared/types';

// Shared UI components  
import { Button, Input } from '@dreamer/ui';

// AI services
import { AIService } from '@dreamer/ai';
```

### API Response Format
```typescript
interface APIResponse<T> {
  success: boolean;
  data?: T;
  error?: string;
  timestamp: string;
}
```

## üéØ Always Remember
1. **Privacy is paramount** - keep everything local
2. **Cross-platform consistency** - web and mobile should feel cohesive
3. **Performance matters** - users want fast dream analysis
4. **Accessibility first** - everyone should be able to use the app
5. **Type safety** - leverage TypeScript to prevent runtime errors

---

*This file guides all development decisions. Update it as the project evolves, but always maintain consistency with the core architecture and principles.*